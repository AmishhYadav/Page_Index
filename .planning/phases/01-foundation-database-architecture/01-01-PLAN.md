---
wave: 1
depends_on: []
files_modified: ["docker-compose.yml", "app/core/config.py", "app/main.py", "requirements.txt", ".env.example"]
autonomous: true
requirements: ["API-01", "INF-01", "INF-04"]
---

# Plan 01-01: FastAPI Structure, Config, and Docker Compose

## Goal
Define FastAPI project structure, centralized Pydantic configuration, and Docker Compose with DB services.

<tasks>
  <task id="1" title="Create foundational project structure">
    <description>Initialize the `app/` directory with `api/v1`, `core`, `db`, `models`, `schemas`, and `services` subdirectories. Create `requirements.txt` with `fastapi`, `uvicorn`, `pydantic-settings`, `sqlalchemy`, `alembic`, `qdrant-client`, `psycopg2-binary`, and `python-json-logger`.</description>
  </task>
  <task id="2" title="Create Pydantic Settings">
    <description>Create `app/core/config.py` with a `Settings` class inheriting from `pydantic_settings.BaseSettings`. Define properties for Postgres (`POSTGRES_URL`), Qdrant (`QDRANT_URL`), and Embedding/LLM models (`EMBEDDING_MODEL_NAME`, `LLM_PROVIDER`, `LLM_API_KEY`). Create a `.env.example` file reflecting these.</description>
  </task>
  <task id="3" title="Initialize basic FastAPI application">
    <description>Create `app/main.py` that instantiates FastAPI, includes a stub standard `/api/v1/health` endpoint, and logs startup via standard library.</description>
  </task>
  <task id="4" title="Configure Docker Compose">
    <description>Create `docker-compose.yml` defining an `api` service (build from a `Dockerfile`), a `postgres` service (image `postgres:15-alpine`), and a `qdrant` service (image `qdrant/qdrant:latest`). Configure network aliases and ports (Postgres 5432, Qdrant 6333, API 8000).</description>
  </task>
</tasks>

<verification>
1. Verify `requirements.txt` contains necessary packages.
2. Verify `docker-compose.yml` parses successfully (`docker compose config`).
3. Verify Pydantic validation catches missing `.env` fields when `app/core/config.py` is executed locally.
</verification>

<must_haves>
- FastAPI server setup exists.
- Fully containerized `docker-compose.yml` with Postgres and Qdrant.
- Centralized configuration via Pydantic using Env Vars.
</must_haves>
