---
wave: 2
depends_on: ["02-01-PLAN.md"]
files_modified: ["app/api/v1/documents.py", "app/main.py", "app/schemas/document.py"]
autonomous: true
requirements: ["INGST-01"]
---

# Plan 02-02: Document Ingestion API

## Goal
Expose a REST API endpoint for document uploads and orchestrate the parsing/ingestion flow.

<tasks>
  <task id="1" title="Define Pydantic Schemas">
    <description>Create `app/schemas/document.py` defining the response models for document status and ingestion summaries.</description>
  </task>
  <task id="2" title="Create Documents Router">
    <description>Create `app/api/v1/documents.py`. Implement `POST /api/v1/documents` using FastAPI's `UploadFile`. The endpoint should accept a PDF, call the `pdf_processor` service, and return a temporary receipt or status.</description>
  </task>
  <task id="3" title="Register Router">
    <description>Include the documents router in `app/main.py` under the `/api/v1` prefix.</description>
  </task>
</tasks>

<verification>
1. `curl -F "file=@sample.pdf" http://localhost:8000/api/v1/documents` returns a 200/201 status and a JSON payload describing the uploaded document.
2. The logs show the request started and completed with a generated `request_id`.
</verification>

<must_haves>
- Functional POST endpoint for PDF upload.
- Router separation matching the Phase 1 architectural context.
- Schema validation for API responses.
</must_haves>
